[
    {
        "name": "Francina Family Patron",
        "features": [
            {
                "name": "Magic Bullets",
                "itemDescriptionAddendum": {
                    "conditions": [
                        {
                            "type": "parameter",
                            "propertyPath": "item.type",
                            "includes": [
                                {
                                    "type": "static",
                                    "value": "Weapon"
                                }
                            ]
                        },
                        {
                            "type": "parameter",
                            "propertyPath": "item.tags",
                            "includes": [
                                {
                                    "type": "static",
                                    "value": "Firearm"
                                }
                            ]
                        }
                    ],
                    "calculation": [
                        {
                            "type": "static",
                            "value": "<b>Magic Bullets.</b> Due to your family's relationship with their divine patron, firearms can be loaded with magic bullets that appear to look, function, fire and sound like normal bullets aside from radiating a magical glow. They do not deal damage like a normal bullet would though: They are instead used for spellcasting. <b>These bullets are your only means of spellcasting.</b>\n\nThere are two types of magic bullets: Focus bullets and Imbued bullets. Only one bullet type can exist at a time, meaning if you create an Imbued bullet, all pre-existing Focus bullets vanish and vice-versa.\n\n<b>Focus Bullets.</b> These bullets give off a red glow and are simply a one-time use focus for a spell or magic action. Focus bullets reduce a spell's somatic components to the mere act of pulling the trigger, meaning the spell or magic action is chosen at the time of firing the gun. Once Focus bullets are loaded into the chamber they will last indefinitely until fired. The time to fire each bullet corresponds to the desired spell or magic action's corresponding action type or time. For spells that take longer than one action to cast, the gun is fired at the start of casting time, but the bullet remains until either the casting is completed or canceled. Any caster that needs a spell focus can utilize firing a Focus bullet as their spellcasting focus as long as they are the one firing the Focus bullet.\n\n<b>Imbued Bullets.</b> These bullets give off a blue glow and have a specific spell or magic action channeled into them when loaded. The resources used to cast the corresponding spell or magic action (spell slot, class resource, etc.) must be expended upon loading each Imbued bullet. The corresponding action type or time for the imbued spell or magic action must then be consumed when pulling the trigger to cast it. The person who pulls the trigger does not have to be the one who loaded it, does not have to be proficient with firearms, and does not even have to be a magic caster. The properties of the spell or magic action (such as spell save DC, spell attack bonus, etc.) are the same as if they were cast by the person who loaded the Imbued bullet in. If one of the properties is concentration, then the person who loads the Imbued bullet must start concentrating on it as soon as it is loaded. When the person who loaded the Imbued bullet stops concentrating, the bullet disappears if it hasn't been fired yet. If it has been fired, the spell or magic action ends instead.\n\nAny imbued bullets remaining in the gun disappear entirely when the person who originally loaded them in takes a short or long rest.\n\n<b>Reloading.</b> Magic bullets are magically resupplied to the wielder's hand via the divine patron on the command <b>Reload</b>, which requires a verbal component. The amount of magic bullets supplied by the divine patron will be the exact amount requested. Magic bullets that are not loaded into or leave the chamber of the gun for more than 6 seconds disappear entirely.\n\nIf magic bullets are able to be struck or crushed hard enough by something other than the hammer of a gun (within 6 seconds so that the Focus bullets don't disappear), they can be used as a spellcasting focus that way.\n\nThe maximum number of Imbued bullets that can exist at once is equal to your proficiency bonus. There is no limit for the maximum number of Focus bullets.\n\n<b>Magical Versatility.</b> Magical effects that could normally only be applied on a melee attack, such as the paladin's smites, can be applied to ranged weapon attacks as well, as long as a weapon containing at least one magic bullet is in the wielder's hand at the time of the ranged weapon attack's hit.\n\nBecause the magical effects of the bullet simply depend on the magic bullet being struck by the hammer of the gun, the gun they are loaded into does not actually need to be aimed: Though, the wielder may choose to do so for dramatic effect.\n\n<b>Disarmed.</b> If disarmed, the wielder is affected as any other caster losing their focus would, though that alone would not end concentration or spells cast prior to being disarmed.\n\nIf connection is severed with the divine patron, each magic bullet that remains loaded can be used on any spell or magic action, but no new magic bullets can be acquired for reloading without a new divine patron."
                        }
                    ]
                },
                "spellCastingConditionAddendum": {
                    "conditions": [
                        {
                            "type": "or",
                            "values": [
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Banishing Smite"
                                            }
                                        ]
                                    }
                                ],
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Blinding Smite"
                                            }
                                        ]
                                    }
                                ],
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Divine Smite"
                                            }
                                        ]
                                    }
                                ],
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Searing Smite"
                                            }
                                        ]
                                    }
                                ],
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Shining Smite"
                                            }
                                        ]
                                    }
                                ],
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Staggering Smite"
                                            }
                                        ]
                                    }
                                ],
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Thunderous Smite"
                                            }
                                        ]
                                    }
                                ],
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Wrathful Smite"
                                            }
                                        ]
                                    }
                                ]
                            ]
                        }
                    ],
                    "calculation": [
                        {
                            "type": "static",
                            "value": "<b>Magic Bullets.</b> This spell can also be cast immediately after hitting a target with a Ranged weapon as long as a weapon containing at least one magic bullet is in the wielder's hand at the time of the ranged weapon attack's hit."
                        }
                    ]
                }
            }
        ]
    },
    {
        "name": "Luck Points",
        "resources": [
            { 
                "name": "luckPoints", 
                "displayName": "Luck Points",
                "longRestRecharge": 0,
                "uses": {
                    "calculation": [
                        {
                            "type": "static",
                            "value": 100
                        }
                    ]
                }
            }
        ],
        "features": [
            {
                "name": "Use Luck Points",
                "actions": [
                    {
                        "name": "Use Luck Points",
                        "actionTime": ["Free"],
                        "range": "Self",
                        "duration": "Instantaneous",
                        "description": "You can expend luck points and add them to any d20 roll you are making. The only limit to how many luck points you can expect, is how many luck points you have.",
                        "challengeType": "none",
                        "type": [],
                        "userInput": [
                            {
                                "name": "luckPointsToSpend",
                                "displayName": "Luck Points to Spend",
                                "type": "numberField",
                                "min": [
                                    {
                                        "type": "static",
                                        "value": 1
                                    }
                                ],
                                "max": [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "resource.remainingUses"
                                    }
                                ]
                            }
                        ],
                        "cost": {
                            "resourceType": "luckPoints",
                            "calculation": [
                                {
                                    "type": "parameter",
                                    "propertyPath": "userInput.luckPointsToSpend"
                                }
                            ]
                        }
                    }
                ]
            }
        ]
    },
    {
        "name": "Spellscar",
        "userInput": [
            {
                "name": "skillPoints",
                "displayName": "Skill Points",
                "type": "numberField",
                "min": [
                    {
                        "type": "static",
                        "value": 1
                    }
                ]
            },
            {
                "name": "spellfireCharges",
                "displayName": "Spellfire Charges",
                "type": "numberField",
                "min": [
                    {
                        "type": "static",
                        "value": 1
                    }
                ]
            }
        ],
        "resources": [
            { 
                "name": "spellfireCharges", 
                "displayName": "Spellfire Charges", 
                "uses": {
                    "calculation": [
                        {
                            "type": "parameter",
                            "propertyPath": "userInput.spellfireCharges"
                        }
                    ]
                }
            }
        ],
        "features": [
            {
                "name": "Shifting Weave",
                "actions": [
                    {
                        "name": "Shifting Weave",
                        "actionTime": ["Action"],
                        "range": "Touch",
                        "duration": "Instantaneous",
                        "description": "Once per day, you can restore the lowest level spell slot to another spellscar weilder who also utilizes spell slots, granted you have spell slots available to expend. This consumes your chosen spell slot.",
                        "challengeType": "none",
                        "type": [],
                        "cost": {
                            "uses": {
                                "calculation": [
                                    {
                                        "type": "static",
                                        "value": 1
                                    }
                                ]
                            },
                            "calculation": [
                                {
                                    "type": "static",
                                    "value": 1
                                }
                            ]
                        },
                        "userInput": [
                            {
                                "name": "consumedSpellSlotLevel",
                                "type": "consumeSpellSlot",
                                "minLevel": [
                                    {
                                        "type": "static",
                                        "value": 1
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ],
        "choices": [
            {
                "property": "spellscarFeatures",
                "description": "Spellscar Skills:",
                "optionsSource": "CUSTOM",
                "multipleSelections": {
                    "calculation": [
                        {
                            "type": "parameter",
                            "propertyPath": "userInput.skillPoints"
                        }
                    ]
                },
                "generateCustomOptionSummary": true,
                "optionDisplayProperty": "name",
                "choiceToAttributesMapping": {
                    "features": "features"
                },
                "options": [
                    {
                        "name": "Spellfire Bolts",
                        "features": [
                            {
                                "name": "Spellfire Bolts",
                                "actions": [
                                    {
                                        "name": "Spellfire Bolts",
                                        "actionTime": ["Action"],
                                        "range": 60,
                                        "duration": "Instantaneous",
                                        "description": "As a magic action, you can expend charges to make a melee or a ranged (maximum range 60ft) spell attack to a creature or an object.\n\nYour class's main ability score is your spellcasting ability and you add your proficiency bonus. On a successful hit, the target suffers 1d6 fire or radiant damage per charge released.",
                                        "challengeType": "none",
                                        "type": ["damage"],
                                        "damage": {
                                            "calculation": [
                                                {
                                                    "type": "dieRoll",
                                                    "value": 6,
                                                    "multiplier": [
                                                        {
                                                            "type": "parameter",
                                                            "propertyPath": "userInput.spellfireChargesToSpend"
                                                        }
                                                    ],
                                                    "diceType": "Fire"
                                                }
                                            ]
                                        },
                                        "userInput": [
                                            {
                                                "name": "spellfireChargesToSpend",
                                                "displayName": "Spellfire Charges to Spend",
                                                "type": "numberField",
                                                "min": [
                                                    {
                                                        "type": "static",
                                                        "value": 1
                                                    }
                                                ],
                                                "max": [
                                                    {
                                                        "type": "parameter",
                                                        "propertyPath": "resource.remainingUses"
                                                    }
                                                ]
                                            }
                                        ],
                                        "cost": {
                                            "resourceType": "spellfireCharges",
                                            "calculation": [
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "userInput.spellfireChargesToSpend"
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "name": "Gravity Strike",
                        "conditions": [
                            {
                                "type": "parameter",
                                "propertyPath": "playerConfigObjectForChoices.choices.spellscarFeatures",
                                "includes": [
                                    {
                                        "type": "static",
                                        "value": "Spellfire Bolts"
                                    }
                                ]
                            },
                            {
                                "type": "parameter",
                                "propertyPath": "currentChoiceValue",
                                "notEquals": [
                                    {
                                        "type": "static",
                                        "value": "Spellfire Bolts"
                                    }
                                ]
                            }
                        ],
                        "features": [
                            {
                                "name": "Gravity Strike",
                                "actions": [
                                    {
                                        "name": "Gravity Strike",
                                        "actionTime": ["Free"],
                                        "range": "Self",
                                        "duration": "Until Next Weapon Attack",
                                        "description": "Expend a charge as part of your attack action. Your next weapon attack deals double damage and the target must succeed against being grappled if standing on ground. On a failure, its movement speed is 0, as its feet sink into the ground from gravity magically increasing on its body. The target can free itself on its turn using half its movement.",
                                        "challengeType": "none",
                                        "type": [],
                                        "aspects": {
                                            "weaponAttackAddendum": {
                                                "calculation": [
                                                    {
                                                        "type": "static",
                                                        "value": "<b>Gravity Strike.</b> Your next weapon attack deals double damage and the target must succeed against being grappled if standing on ground. On a failure, its movement speed is 0, as its feet sink into the ground from gravity magically increasing on its body. The target can free itself on its turn using half its movement."
                                                    }
                                                ]
                                            }
                                        },
                                        "cost": {
                                            "resourceType": "spellfireCharges",
                                            "calculation": [
                                                {
                                                    "type": "static",
                                                    "value": 1
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "name": "Echoes of Valor",
                        "conditions": [
                            {
                                "type": "parameter",
                                "propertyPath": "playerConfigObjectForChoices.choices.spellscarFeatures",
                                "includes": [
                                    {
                                        "type": "static",
                                        "value": "Spellfire Bolts"
                                    }
                                ]
                            },
                            {
                                "type": "parameter",
                                "propertyPath": "playerConfigObjectForChoices.choices.spellscarFeatures",
                                "includes": [
                                    {
                                        "type": "static",
                                        "value": "Gravity Strike"
                                    }
                                ]
                            },
                            {
                                "type": "parameter",
                                "propertyPath": "currentChoiceValue",
                                "notEquals": [
                                    {
                                        "type": "static",
                                        "value": "Spellfire Bolts"
                                    }
                                ]
                            },
                            {
                                "type": "parameter",
                                "propertyPath": "currentChoiceValue",
                                "notEquals": [
                                    {
                                        "type": "static",
                                        "value": "Gravity Strike"
                                    }
                                ]
                            }
                        ],
                        "features": [
                            {
                                "name": "Echoes of Valor",
                                "actions": [
                                    {
                                        "name": "Echoes of Valor",
                                        "actionTime": ["Free"],
                                        "range": "Self",
                                        "duration": "Until Next Weapon Attack",
                                        "description": "Expend 2 charges as part of your attack action. Your next weapon attack deals triple damage on a hit. And you may attempt one extra attack as a your bonus action.",
                                        "challengeType": "none",
                                        "type": [],
                                        "aspects": {
                                            "weaponAttackAddendum": {
                                                "calculation": [
                                                    {
                                                        "type": "static",
                                                        "value": "<b>Echoes of Valor.</b> Your next weapon attack deals triple damage on a hit. And you may attempt one extra attack as a your bonus action."
                                                    }
                                                ]
                                            }
                                        },
                                        "cost": {
                                            "resourceType": "spellfireCharges",
                                            "calculation": [
                                                {
                                                    "type": "static",
                                                    "value": 2
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ]
    }
]