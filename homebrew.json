[
    {
        "name": "Francina Family Patron",
        "features": [
            {
                "name": "Magic Bullets",
                "itemDescriptionAddendum": {
                    "conditions": [
                        {
                            "type": "parameter",
                            "propertyPath": "item.type",
                            "includes": [
                                {
                                    "type": "static",
                                    "value": "Weapon"
                                }
                            ]
                        },
                        {
                            "type": "parameter",
                            "propertyPath": "item.tags",
                            "includes": [
                                {
                                    "type": "static",
                                    "value": "Firearm"
                                }
                            ]
                        }
                    ],
                    "calculation": [
                        {
                            "type": "static",
                            "value": "<b>Magic Bullets.</b> Due to your family's relationship with their divine patron, firearms can be loaded with magic bullets that appear to look, function, fire and sound like normal bullets aside from radiating a magical glow. They do not deal damage like a normal bullet would though: They are instead used for spellcasting. <b>These bullets are your only means of spellcasting.</b>\n\nThere are two types of magic bullets: Focus bullets and Imbued bullets. Only one bullet type can exist at a time, meaning if you create an Imbued bullet, all pre-existing Focus bullets vanish and vice-versa.\n\n<b>Focus Bullets.</b> These bullets give off a red glow and are simply a one-time use focus for a spell or magic action. Focus bullets reduce a spell's somatic components to the mere act of pulling the trigger, meaning the spell or magic action is chosen at the time of firing the gun. Once Focus bullets are loaded into the chamber they will last indefinitely until fired. The time to fire each bullet corresponds to the desired spell or magic action's corresponding action type or time. For spells that take longer than one action to cast, the gun is fired at the start of casting time, but the bullet remains until either the casting is completed or canceled. Any caster that needs a spell focus can utilize firing a Focus bullet as their spellcasting focus as long as they are the one firing the Focus bullet.\n\n<b>Imbued Bullets.</b> These bullets give off a blue glow and have a specific spell or magic action channeled into them when loaded. The resources used to cast the corresponding spell or magic action (spell slot, class resource, etc.) must be expended upon loading each Imbued bullet. The corresponding action type or time for the imbued spell or magic action must then be consumed when pulling the trigger to cast it. The person who pulls the trigger does not have to be the one who loaded it, does not have to be proficient with firearms, and does not even have to be a magic caster. The properties of the spell or magic action (such as spell save DC, spell attack bonus, etc.) are the same as if they were cast by the person who loaded the Imbued bullet in. If one of the properties is concentration, then the person who loads the Imbued bullet must start concentrating on it as soon as it is loaded. When the person who loaded the Imbued bullet stops concentrating, the bullet disappears if it hasn't been fired yet. If it has been fired, the spell or magic action ends instead.\n\nAny imbued bullets remaining in the gun disappear entirely when the person who originally loaded them in takes a short or long rest.\n\n<b>Reloading.</b> Magic bullets are magically resupplied to the wielder's hand via the divine patron on the command <b>Reload</b>, which requires a verbal component. The amount of magic bullets supplied by the divine patron will be the exact amount requested. Magic bullets that are not loaded into or leave the chamber of the gun for more than 6 seconds disappear entirely.\n\nIf magic bullets are able to be struck or crushed hard enough by something other than the hammer of a gun (within 6 seconds so that the Focus bullets don't disappear), they can be used as a spellcasting focus that way.\n\nThe maximum number of Imbued bullets that can exist at once is equal to your proficiency bonus. There is no limit for the maximum number of Focus bullets.\n\n<b>Magical Versatility.</b> Magical effects that could normally only be applied on a melee attack, such as the paladin's smites, can be applied to ranged weapon attacks as well, as long as a weapon containing at least one magic bullet is in the wielder's hand at the time of the ranged weapon attack's hit.\n\nBecause the magical effects of the bullet simply depend on the magic bullet being struck by the hammer of the gun, the gun they are loaded into does not actually need to be aimed: Though, the wielder may choose to do so for dramatic effect.\n\n<b>Disarmed.</b> If disarmed, the wielder is affected as any other caster losing their focus would, though that alone would not end concentration or spells cast prior to being disarmed.\n\nIf connection is severed with the divine patron, each magic bullet that remains loaded can be used on any spell or magic action, but no new magic bullets can be acquired for reloading without a new divine patron."
                        }
                    ]
                },
                "spellCastingConditionAddendum": {
                    "conditions": [
                        {
                            "type": "or",
                            "values": [
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Banishing Smite"
                                            }
                                        ]
                                    }
                                ],
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Blinding Smite"
                                            }
                                        ]
                                    }
                                ],
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Divine Smite"
                                            }
                                        ]
                                    }
                                ],
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Searing Smite"
                                            }
                                        ]
                                    }
                                ],
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Shining Smite"
                                            }
                                        ]
                                    }
                                ],
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Staggering Smite"
                                            }
                                        ]
                                    }
                                ],
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Thunderous Smite"
                                            }
                                        ]
                                    }
                                ],
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Wrathful Smite"
                                            }
                                        ]
                                    }
                                ]
                            ]
                        }
                    ],
                    "calculation": [
                        {
                            "type": "static",
                            "value": "<b>Magic Bullets.</b> This spell can also be cast immediately after hitting a target with a Ranged weapon as long as a weapon containing at least one magic bullet is in the wielder's hand at the time of the ranged weapon attack's hit."
                        }
                    ]
                },
                "featureActionDescriptionAddendum": {
                    "conditions": [
                        {
                            "type": "or",
                            "values": [
                                [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "featureAction.name",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Aura of Hate"
                                            }
                                        ]
                                    }
                                ]
                            ]
                        }
                    ],
                    "calculation": [
                        {
                            "type": "static",
                            "value": "<b>Francina Family Patron.</b> This feature can also be applied to Ranged weapons."
                        }
                    ]
                },
                "weaponDamageBonus": {
                    "conditions": [
                        {
                            "type": "config",
                            "propertyPath": "currentStatus"
                        },
                        {
                            "type": "config",
                            "propertyPath": "currentStatus.activeEffects"
                        },
                        {
                            "type": "config",
                            "propertyPath": "currentStatus.activeEffects.length"
                        },
                        {
                            "type": "config",
                            "propertyPath": "currentStatus.activeEffects",
                            "itemParameterName": "activeEffect",
                            "some": [
                                {
                                    "type": "parameter",
                                    "propertyPath": "activeEffect.type",
                                    "equals": [
                                        {
                                            "type": "static",
                                            "value": "featureaction"
                                        }
                                    ]
                                },
                                {
                                    "type": "parameter",
                                    "propertyPath": "activeEffect.name",
                                    "equals": [
                                        {
                                            "type": "static",
                                            "value": "Aura of Hate"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "parameter",
                            "propertyPath": "weapon.weaponRange",
                            "equals": [
                                {
                                    "type": "static",
                                    "value": "Ranged"
                                }
                            ]
                        }
                    ],
                    "calculation": [
                        {
                            "type": "highestOf",
                            "values": [
                                [
                                    {
                                        "type": "static",
                                        "value": 1
                                    }
                                ],
                                [
                                    {
                                        "type": "aspect",
                                        "value": "charismaModifier"
                                    }
                                ]
                            ]
                        }
                    ]
                }
            }
        ]
    },
    {
        "name": "Lingering Injuries",
        "userInput": [
            {
                "name": "numberOfInjuries",
                "displayName": "Number of Injuries:",
                "type": "numberField",
                "min": [
                    {
                        "type": "static",
                        "value": 1
                    }
                ]
            }
        ],
        "choices": [
            {
                "property": "spellscarFeatures",
                "description": "Injuries:",
                "optionsSource": "CUSTOM",
                "multipleSelections": {
                    "calculation": [
                        {
                            "type": "parameter",
                            "propertyPath": "userInput.numberOfInjuries"
                        }
                    ]
                },
                "generateCustomOptionSummary": true,
                "optionDisplayProperty": "name",
                "choiceToAttributesMapping": {
                    "features": "features"
                },
                "options": [
                    {
                        "name": "Loss of an eye",
                        "features": [
                            {
                                "name": "Loss of an eye",
                                "skillProficiencyPerceptionAddendum": {
                                    "conditions": [
                                        {
                                            "type": "aspect",
                                            "value": "equippedItems",
                                            "itemParameterName": "item",
                                            "notSome": [
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.type",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Prosthetic"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.prostheticType",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Eye"
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ],
                                    "calculation": [
                                        {
                                            "type": "static",
                                            "value": "<b>Loss of an eye.</b> You have disadvantage on Perception checks that rely on sight."
                                        }
                                    ]
                                },
                                "weaponAttackAddendum": {
                                    "conditions": [
                                        {
                                            "type": "aspect",
                                            "value": "equippedItems",
                                            "itemParameterName": "item",
                                            "notSome": [
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.type",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Prosthetic"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.prostheticType",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Eye"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "or",
                                            "values": [
                                                [
                                                    {
                                                        "type": "parameter",
                                                        "propertyPath": "isThrown"
                                                    }
                                                ],
                                                [
                                                    {
                                                        "type": "parameter",
                                                        "propertyPath": "weapon.weaponRange",
                                                        "equals": [
                                                            {
                                                                "type": "static",
                                                                "value": "Ranged"
                                                            }
                                                        ]
                                                    }
                                                ]
                                            ]
                                        }
                                    ],
                                    "calculation": [
                                        {
                                            "type": "static",
                                            "value": "<b>Loss of an eye.</b> You have disadvantage on ranged attack rolls."
                                        }
                                    ]
                                },
                                "spellAttackAddendum": {
                                    "conditions": [
                                        {
                                            "type": "aspect",
                                            "value": "equippedItems",
                                            "itemParameterName": "item",
                                            "notSome": [
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.type",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Prosthetic"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.prostheticType",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Eye"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "parameter",
                                            "propertyPath": "spell.range",
                                            "notEquals": [
                                                {
                                                    "type": "static",
                                                    "value": "Touch"
                                                }
                                            ]
                                        }
                                    ],
                                    "calculation": [
                                        {
                                            "type": "static",
                                            "value": "<b>Loss of an eye.</b> You have disadvantage on ranged attack rolls."
                                        }
                                    ]
                                }
                            }
                        ]
                    },
                    {
                        "name": "Loss of an arm or hand",
                        "features": [
                            {
                                "name": "Loss of an arm or hand",
                                "numberOfHandsBonus": {
                                    "conditions": [
                                        {
                                            "type": "aspect",
                                            "value": "equippedItems",
                                            "itemParameterName": "item",
                                            "notSome": [
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.type",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Prosthetic"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.prostheticType",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Arm"
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ],
                                    "calculation": [
                                        {
                                            "type": "static",
                                            "value": -1
                                        }
                                    ]
                                }
                            }
                        ]
                    },
                    {
                        "name": "Loss of a leg or foot",
                        "features": [
                            {
                                "name": "Loss of a leg or foot",
                                "speedDivider": {
                                    "conditions": [
                                        {
                                            "type": "aspect",
                                            "value": "equippedItems",
                                            "itemParameterName": "item",
                                            "notSome": [
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.type",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Prosthetic"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.prostheticType",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Leg"
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ],
                                    "calculation": [
                                        {
                                            "type": "static",
                                            "value": 2
                                        }
                                    ]
                                },
                                "speedAddendum": {
                                    "conditions": [
                                        {
                                            "type": "aspect",
                                            "value": "equippedItems",
                                            "itemParameterName": "item",
                                            "notSome": [
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.type",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Prosthetic"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.prostheticType",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Leg"
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ],
                                    "calculation": [
                                        {
                                            "type": "static",
                                            "value": "<b>Loss of a leg or foot.</b> Your speed is halved."
                                        }
                                    ]
                                },
                                "actionConditionAddendum": {
                                    "conditions": [
                                        {
                                            "type": "aspect",
                                            "value": "equippedItems",
                                            "itemParameterName": "item",
                                            "notSome": [
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.type",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Prosthetic"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.prostheticType",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Leg"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "parameter",
                                            "propertyPath": "action"
                                        },
                                        {
                                            "type": "parameter",
                                            "propertyPath": "action.name",
                                            "equals": [
                                                {
                                                    "type": "static",
                                                    "value": "Dash"
                                                }
                                            ]
                                        }
                                    ],
                                    "calculation": [
                                        {
                                            "type": "static",
                                            "value": "<b>Loss of a leg or foot.</b> You will fall prone after dashing."
                                        }
                                    ]
                                },
                                "skillProficiencyAcrobaticsAddendum": {
                                    "conditions": [
                                        {
                                            "type": "aspect",
                                            "value": "equippedItems",
                                            "itemParameterName": "item",
                                            "notSome": [
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.type",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Prosthetic"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.prostheticType",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Leg"
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ],
                                    "calculation": [
                                        {
                                            "type": "static",
                                            "value": "<b>Loss of a leg or foot.</b> Disadvantage on Acrobatics checks made to balance."
                                        }
                                    ]
                                }
                            }
                        ]
                    },
                    {
                        "name": "Limp",
                        "features": [
                            {
                                "name": "Limp",
                                "speedBonus": {
                                    "conditions": [
                                        {
                                            "type": "aspect",
                                            "value": "equippedItems",
                                            "itemParameterName": "item",
                                            "notSome": [
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.type",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Prosthetic"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.prostheticType",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Leg"
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ],
                                    "calculation": [
                                        {
                                            "type": "static",
                                            "value": -5
                                        }
                                    ]
                                },
                                "speedAddendum": {
                                    "conditions": [
                                        {
                                            "type": "aspect",
                                            "value": "equippedItems",
                                            "itemParameterName": "item",
                                            "notSome": [
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.type",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Prosthetic"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.prostheticType",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Leg"
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ],
                                    "calculation": [
                                        {
                                            "type": "static",
                                            "value": "<b>Limp.</b> Your speed is reduced by 5 feet."
                                        }
                                    ]
                                },
                                "actionConditionAddendum": {
                                    "conditions": [
                                        {
                                            "type": "aspect",
                                            "value": "equippedItems",
                                            "itemParameterName": "item",
                                            "notSome": [
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.type",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Prosthetic"
                                                        }
                                                    ]
                                                },
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "item.prostheticType",
                                                    "equals": [
                                                        {
                                                            "type": "static",
                                                            "value": "Leg"
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            "type": "parameter",
                                            "propertyPath": "action"
                                        },
                                        {
                                            "type": "parameter",
                                            "propertyPath": "action.name",
                                            "equals": [
                                                {
                                                    "type": "static",
                                                    "value": "Dash"
                                                }
                                            ]
                                        }
                                    ],
                                    "calculation": [
                                        {
                                            "type": "static",
                                            "value": "<b>Limp.</b> You must succeed a DC 10 Dexterity saving throw after dashing or fall prone."
                                        }
                                    ]
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "name": "Luck Points",
        "resources": [
            { 
                "name": "luckPoints", 
                "displayName": "Luck Points",
                "longRestRecharge": 0,
                "uses": {
                    "calculation": [
                        {
                            "type": "static",
                            "value": 100
                        }
                    ]
                }
            }
        ],
        "features": [
            {
                "name": "Use Luck Points",
                "actions": [
                    {
                        "name": "Use Luck Points",
                        "actionTime": ["Free"],
                        "range": "Self",
                        "duration": "Instantaneous",
                        "description": "You can expend luck points and add them to any d20 roll you are making. The only limit to how many luck points you can expect, is how many luck points you have.",
                        "challengeType": "none",
                        "type": [],
                        "userInput": [
                            {
                                "name": "luckPointsToSpend",
                                "displayName": "Luck Points to Spend",
                                "type": "numberField",
                                "min": [
                                    {
                                        "type": "static",
                                        "value": 1
                                    }
                                ],
                                "max": [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "resource.remainingUses"
                                    }
                                ]
                            }
                        ],
                        "cost": {
                            "resourceType": "luckPoints",
                            "calculation": [
                                {
                                    "type": "parameter",
                                    "propertyPath": "userInput.luckPointsToSpend"
                                }
                            ]
                        }
                    }
                ]
            }
        ]
    },
    {
        "name": "Spellscar",
        "userInput": [
            {
                "name": "skillPoints",
                "displayName": "Skill Points",
                "type": "numberField",
                "min": [
                    {
                        "type": "static",
                        "value": 1
                    }
                ]
            },
            {
                "name": "spellfireCharges",
                "displayName": "Spellfire Charges",
                "type": "numberField",
                "min": [
                    {
                        "type": "static",
                        "value": 1
                    }
                ]
            }
        ],
        "resources": [
            { 
                "name": "spellfireCharges", 
                "displayName": "Spellfire Charges", 
                "uses": {
                    "calculation": [
                        {
                            "type": "parameter",
                            "propertyPath": "userInput.spellfireCharges"
                        }
                    ]
                }
            }
        ],
        "features": [
            {
                "name": "Shifting Weave",
                "actions": [
                    {
                        "name": "Shifting Weave",
                        "actionTime": ["Action"],
                        "range": "Touch",
                        "duration": "Instantaneous",
                        "description": "Once per day, you can restore the lowest level spell slot to another spellscar weilder who also utilizes spell slots, granted you have spell slots available to expend. This consumes your chosen spell slot.",
                        "challengeType": "none",
                        "type": [],
                        "cost": {
                            "uses": {
                                "calculation": [
                                    {
                                        "type": "static",
                                        "value": 1
                                    }
                                ]
                            },
                            "calculation": [
                                {
                                    "type": "static",
                                    "value": 1
                                }
                            ]
                        },
                        "userInput": [
                            {
                                "name": "consumedSpellSlotLevel",
                                "type": "consumeSpellSlot",
                                "minLevel": [
                                    {
                                        "type": "static",
                                        "value": 1
                                    }
                                ]
                            }
                        ]
                    }
                ]
            },
            {
                "name": "Weave Collapse",
                "actions": [
                    {
                        "name": "Weave Collapse",
                        "actionTime": ["Action"],
                        "range": "Self",
                        "duration": "Instantaneous",
                        "description": "Detonate yourself in an arcane explosion.\n\nDeal 10d10 fire, 10d10 radiant, 10d10 bludgeoning, 10d10 force, and 10d10 psychic damage to every creature of your choice within 1 mile. Any terrain and buildings in the area are affected, and all magic in the area changes. Flip a coin to see if the area becomes a dead zone (tails) or a wild magic zone (heads).",
                        "challengeType": "none",
                        "type": []
                    }
                ]
            },
            {
                "name": "Leyline Syncopation",
                "conditions": [
                    {
                        "type": "aspect",
                        "value": "equippedItems",
                        "itemParameterName": "item",
                        "some": [
                            {
                                "type": "parameter",
                                "propertyPath": "item.tags",
                                "includes": [
                                    {
                                        "type": "static",
                                        "value": "WeaveWear"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "actions": [
                    {
                        "name": "Leyline Syncopation",
                        "actionTime": ["Free"],
                        "range": "Self",
                        "duration": "1 turn",
                        "description": "As part of a weapon attack (ranged or melee) or a single target spell/ability that has a range of touch (like Lay on Hands or Vampiric Touch), you can expend two charges to activate your Weave Wear to tap directly into the weave and force your chosen ability to travel along leylines beyond its normal reach.\n\nWhere your attack, spell, or special action wouldn't normally be able to reach, such as not having line of sight, needing to curve around a bend, or a target has cover, you can extend that reach up to 30ft away.\n\nExample: This can make ammunition curve around a bend, cast cure wounds on a faraway target, or cast light on an object. This cannot be used to grapple, administer a potion, move objects/creatures, or other similar actions. This also cannot go across planes.",
                        "challengeType": "none",
                        "type": [],
                        "cost": {
                            "resourceType": "spellfireCharges",
                            "calculation": [
                                {
                                    "type": "static",
                                    "value": 2
                                }
                            ]
                        },
                        "aspects": {
                            "itemDescriptionAddendum": {
                                "conditions": [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "item.type",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Weapon"
                                            }
                                        ]
                                    }
                                ],
                                "calculation": [
                                    {
                                        "type": "static",
                                        "value": "<b>Leyline Syncopation.</b> Where your attack wouldn't normally be able to reach, such as not having line of sight, needing to curve around a bend, or a target has cover, you can extend that reach up to 30ft away."
                                    }
                                ]
                            },
                            "featureActionDescriptionAddendum": {
                                "conditions": [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "featureAction.range",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Touch"
                                            }
                                        ]
                                    }
                                ],
                                "calculation": [
                                    {
                                        "type": "static",
                                        "value": "<b>Leyline Syncopation.</b> Where your special action wouldn't normally be able to reach, such as not having line of sight, needing to curve around a bend, or a target has cover, you can extend that reach up to 30ft away."
                                    }
                                ]
                            },
                            "spellCastingDescriptionAddendum": {
                                "conditions": [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "spell.range",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "Touch"
                                            }
                                        ]
                                    }
                                ],
                                "calculation": [
                                    {
                                        "type": "static",
                                        "value": "<b>Leyline Syncopation.</b> Where your spell wouldn't normally be able to reach, such as not having line of sight, needing to curve around a bend, or a target has cover, you can extend that reach up to 30ft away."
                                    }
                                ]
                            }
                        }
                    }
                ]
            }
        ],
        "choices": [
            {
                "property": "spellscarFeatures",
                "description": "Spellscar Skills:",
                "optionsSource": "CUSTOM",
                "multipleSelections": {
                    "calculation": [
                        {
                            "type": "parameter",
                            "propertyPath": "userInput.skillPoints"
                        }
                    ]
                },
                "generateCustomOptionSummary": true,
                "optionDisplayProperty": "name",
                "choiceToAttributesMapping": {
                    "features": "features"
                },
                "options": [
                    {
                        "name": "Mask of Midnight",
                        "features": [
                            {
                                "name": "Mask of Midnight",
                                "actions": [
                                    {
                                        "name": "Mask of Midnight",
                                        "actionTime": ["Action"],
                                        "range": "Self",
                                        "duration": "Instantaneous",
                                        "description": "Expend one charge as a magic action. You project a powerful illusion into a 15 ft cone in front of you. Each creature within the area must make an Intelligence saving throw or take 1d10 psychic damage.",
                                        "challengeType": "savingThrow",
                                        "savingThrowType": "intelligence",
                                        "type": ["damage"],
                                        "damage": {
                                            "calculation": [
                                                {
                                                    "type": "dieRoll",
                                                    "value": 10,
                                                    "diceType": "Psychic"
                                                }
                                            ]
                                        },
                                        "cost": {
                                            "resourceType": "spellfireCharges",
                                            "calculation": [
                                                {
                                                    "type": "static",
                                                    "value": 1
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "name": "Spell Bolster",
                        "conditions": [
                            {
                                "type": "parameter",
                                "propertyPath": "playerConfigObjectForChoices.choices.spellscarFeatures",
                                "includes": [
                                    {
                                        "type": "static",
                                        "value": "Mask of Midnight"
                                    }
                                ]
                            },
                            {
                                "type": "parameter",
                                "propertyPath": "currentChoiceValue",
                                "notEquals": [
                                    {
                                        "type": "static",
                                        "value": "Mask of Midnight"
                                    }
                                ]
                            }
                        ],
                        "features": [
                            {
                                "name": "Spell Bolster",
                                "actions": [
                                    {
                                        "name": "Spell Bolster",
                                        "actionTime": ["Free"],
                                        "actionCondition": "As part of casting a spell that has a saving throw.",
                                        "range": "Self",
                                        "duration": "Instantaneous",
                                        "description": "Expend a charge as part of casting a spell that has a saving throw. Increase your spell save DC by 1 until the end of your turn.",
                                        "challengeType": "none",
                                        "type": ["buff"],
                                        "buff": {
                                            "calculation": [
                                                {
                                                    "type": "static",
                                                    "value": "Your spell save DC is increased by 1 until the end of your turn."
                                                }
                                            ]
                                        },
                                        "aspects": {
                                            "spellSaveDCBonus": {
                                                "calculation": [
                                                    {
                                                        "type": "static",
                                                        "value": 1
                                                    }
                                                ]
                                            }
                                        },
                                        "cost": {
                                            "resourceType": "spellfireCharges",
                                            "calculation": [
                                                {
                                                    "type": "static",
                                                    "value": 1
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "name": "Spellfire Bolts",
                        "features": [
                            {
                                "name": "Spellfire Bolts",
                                "actions": [
                                    {
                                        "name": "Spellfire Bolts",
                                        "actionTime": ["Action"],
                                        "range": 60,
                                        "duration": "Instantaneous",
                                        "description": "As a magic action, you can expend charges to make a melee or a ranged (maximum range 60ft) spell attack to a creature or an object.\n\nYour class's main ability score is your spellcasting ability and you add your proficiency bonus. On a successful hit, the target suffers 1d6 fire or radiant damage per charge released.",
                                        "challengeType": "attackRoll",
                                        "attackRollType": "spellAttack",
                                        "type": ["damage"],
                                        "damage": {
                                            "calculation": [
                                                {
                                                    "type": "dieRoll",
                                                    "value": 6,
                                                    "multiplier": [
                                                        {
                                                            "type": "parameter",
                                                            "propertyPath": "userInput.spellfireChargesToSpend"
                                                        }
                                                    ],
                                                    "diceType": "Fire"
                                                }
                                            ]
                                        },
                                        "userInput": [
                                            {
                                                "name": "spellfireChargesToSpend",
                                                "displayName": "Spellfire Charges to Spend",
                                                "type": "numberField",
                                                "min": [
                                                    {
                                                        "type": "static",
                                                        "value": 1
                                                    }
                                                ],
                                                "max": [
                                                    {
                                                        "type": "parameter",
                                                        "propertyPath": "resource.remainingUses"
                                                    }
                                                ]
                                            }
                                        ],
                                        "cost": {
                                            "resourceType": "spellfireCharges",
                                            "calculation": [
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "userInput.spellfireChargesToSpend"
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "name": "Gravity Strike",
                        "conditions": [
                            {
                                "type": "parameter",
                                "propertyPath": "playerConfigObjectForChoices.choices.spellscarFeatures",
                                "includes": [
                                    {
                                        "type": "static",
                                        "value": "Spellfire Bolts"
                                    }
                                ]
                            },
                            {
                                "type": "parameter",
                                "propertyPath": "currentChoiceValue",
                                "notEquals": [
                                    {
                                        "type": "static",
                                        "value": "Spellfire Bolts"
                                    }
                                ]
                            }
                        ],
                        "features": [
                            {
                                "name": "Gravity Strike",
                                "actions": [
                                    {
                                        "name": "Gravity Strike",
                                        "actionTime": ["Free"],
                                        "range": "Self",
                                        "duration": "Until Next Weapon Attack",
                                        "description": "Expend a charge as part of your attack action. Your next weapon attack deals double damage and the target must succeed against being grappled if standing on ground. On a failure, its movement speed is 0, as its feet sink into the ground from gravity magically increasing on its body. The target can free itself on its turn using half its movement.",
                                        "challengeType": "none",
                                        "type": [],
                                        "aspects": {
                                            "weaponAttackAddendum": {
                                                "calculation": [
                                                    {
                                                        "type": "static",
                                                        "value": "<b>Gravity Strike.</b> Your next weapon attack deals double damage and the target must succeed against being grappled if standing on ground. On a failure, its movement speed is 0, as its feet sink into the ground from gravity magically increasing on its body. The target can free itself on its turn using half its movement."
                                                    }
                                                ]
                                            }
                                        },
                                        "cost": {
                                            "resourceType": "spellfireCharges",
                                            "calculation": [
                                                {
                                                    "type": "static",
                                                    "value": 1
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "name": "Echoes of Valor",
                        "conditions": [
                            {
                                "type": "parameter",
                                "propertyPath": "playerConfigObjectForChoices.choices.spellscarFeatures",
                                "includes": [
                                    {
                                        "type": "static",
                                        "value": "Spellfire Bolts"
                                    }
                                ]
                            },
                            {
                                "type": "parameter",
                                "propertyPath": "playerConfigObjectForChoices.choices.spellscarFeatures",
                                "includes": [
                                    {
                                        "type": "static",
                                        "value": "Gravity Strike"
                                    }
                                ]
                            },
                            {
                                "type": "parameter",
                                "propertyPath": "currentChoiceValue",
                                "notEquals": [
                                    {
                                        "type": "static",
                                        "value": "Spellfire Bolts"
                                    }
                                ]
                            },
                            {
                                "type": "parameter",
                                "propertyPath": "currentChoiceValue",
                                "notEquals": [
                                    {
                                        "type": "static",
                                        "value": "Gravity Strike"
                                    }
                                ]
                            }
                        ],
                        "features": [
                            {
                                "name": "Echoes of Valor",
                                "actions": [
                                    {
                                        "name": "Echoes of Valor",
                                        "actionTime": ["Free"],
                                        "range": "Self",
                                        "duration": "Until Next Weapon Attack",
                                        "description": "Expend 2 charges as part of your attack action. Your next weapon attack deals triple damage on a hit. And you may attempt one extra attack as a your bonus action.",
                                        "challengeType": "none",
                                        "type": [],
                                        "aspects": {
                                            "weaponAttackAddendum": {
                                                "calculation": [
                                                    {
                                                        "type": "static",
                                                        "value": "<b>Echoes of Valor.</b> Your next weapon attack deals triple damage on a hit. And you may attempt one extra attack as a your bonus action."
                                                    }
                                                ]
                                            }
                                        },
                                        "cost": {
                                            "resourceType": "spellfireCharges",
                                            "calculation": [
                                                {
                                                    "type": "static",
                                                    "value": 2
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "name": "Burning Restoration",
                        "features": [
                            {
                                "name": "Burning Restoration",
                                "actions": [
                                    {
                                        "name": "Burning Restoration",
                                        "actionTime": ["Action"],
                                        "range": "Touch",
                                        "duration": "Instantaneous",
                                        "description": "As an action, one creature you touch can spend 1 of its hit dice to heal itself per charge you expend. If at full health, any number over your max HP turns into temporary hit points but at half the value rolled (ex: 2 HP extra becomes 1).",
                                        "challengeType": "none",
                                        "type": ["healing"],
                                        "healing": {
                                            "calculation": [
                                                {
                                                    "type": "if-then",
                                                    "if": [
                                                        {
                                                            "type": "parameter",
                                                            "propertyPath": "userInput.consumedHitDice"
                                                        }
                                                    ],
                                                    "then": [
                                                        {
                                                            "type": "parameter",
                                                            "propertyPath": "userInput.consumedHitDice"
                                                        }
                                                    ],
                                                    "else": [
                                                        {
                                                            "type": "static",
                                                            "value": "Can spend "
                                                        },
                                                        {
                                                            "type": "parameter",
                                                            "propertyPath": "userInput.spellfireChargesToSpend"
                                                        },
                                                        {
                                                            "type": "static",
                                                            "value": " hit dice."
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        "userInput": [
                                            {
                                                "name": "spellfireChargesToSpend",
                                                "displayName": "Spellfire Charges to Spend",
                                                "type": "numberField",
                                                "min": [
                                                    {
                                                        "type": "static",
                                                        "value": 1
                                                    }
                                                ],
                                                "max": [
                                                    {
                                                        "type": "parameter",
                                                        "propertyPath": "resource.remainingUses"
                                                    }
                                                ]
                                            },
                                            {
                                                "name": "consumedHitDice",
                                                "displayName": "Your Hit Dice:",
                                                "type": "consumeHitDice",
                                                "min": [
                                                    {
                                                        "type": "static",
                                                        "value": 1
                                                    }
                                                ],
                                                "max": [
                                                    {
                                                        "type": "parameter",
                                                        "propertyPath": "userInput.spellfireChargesToSpend"
                                                    }
                                                ]
                                            }
                                        ],
                                        "cost": {
                                            "resourceType": "spellfireCharges",
                                            "calculation": [
                                                {
                                                    "type": "parameter",
                                                    "propertyPath": "userInput.spellfireChargesToSpend"
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "name": "Spell Eater",
                        "conditions": [
                            {
                                "type": "parameter",
                                "propertyPath": "playerConfigObjectForChoices.choices.spellscarFeatures",
                                "includes": [
                                    {
                                        "type": "static",
                                        "value": "Burning Restoration"
                                    }
                                ]
                            },
                            {
                                "type": "parameter",
                                "propertyPath": "currentChoiceValue",
                                "notEquals": [
                                    {
                                        "type": "static",
                                        "value": "Burning Restoration"
                                    }
                                ]
                            }
                        ],
                        "features": [
                            {
                                "name": "Spell Eater",
                                "actions": [
                                    {
                                        "name": "Spell Eater",
                                        "actionTime": ["Reaction"],
                                        "range": "Self",
                                        "duration": "Instantaneous",
                                        "description": "When you are the only target of an enemy ability that requires a saving throw, you can give yourself advantage on the save by expending a charge as a reaction. If you succeed on the save, you regain hp equal to the level of the spell used or half the attacker's CR (minimum 1) if the ability wasn't a spell.",
                                        "challengeType": "none",
                                        "type": ["buff", "healing"],
                                        "buff": {
                                            "calculation": [
                                                {
                                                    "type": "static",
                                                    "value": "You have advantage on the saving throw against the enemy ability."
                                                }
                                            ]
                                        },
                                        "healing": {
                                            "calculation": [
                                                {
                                                    "type": "static",
                                                    "value": "If you succeed on the save, you regain hp equal to the level of the spell used or half the attacker's CR (minimum 1) if the ability wasn't a spell."
                                                }
                                            ]
                                        },
                                        "cost": {
                                            "resourceType": "spellfireCharges",
                                            "calculation": [
                                                {
                                                    "type": "static",
                                                    "value": 1
                                                }
                                            ]
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "name": "Charged Arcflare",
                        "conditions": [
                            {
                                "type": "aspect",
                                "value": "equippedItems",
                                "itemParameterName": "item",
                                "some": [
                                    {
                                        "type": "parameter",
                                        "propertyPath": "item.tags",
                                        "includes": [
                                            {
                                                "type": "static",
                                                "value": "WeaveWear"
                                            }
                                        ]
                                    }
                                ]
                            }
                        ],
                        "features": [
                            {
                                "name": "Charged Arcflare",
                                "conditions": [
                                    {
                                        "type": "aspect",
                                        "value": "equippedItems",
                                        "itemParameterName": "item",
                                        "some": [
                                            {
                                                "type": "parameter",
                                                "propertyPath": "item.tags",
                                                "includes": [
                                                    {
                                                        "type": "static",
                                                        "value": "WeaveWear"
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ],
                                "actions": [
                                    {
                                        "name": "Charged Arcflare",
                                        "actionTime": ["Free"],
                                        "range": "Self",
                                        "duration": "1 round",
                                        "description": "Each time you make a spell attack or hit with a weapon attack while wearing WeaveWear, you can expend 1 charge to add +1d6 force damage to the total damage dealt. This bonus stacks (max 4 stacks, ex: 1d6 becomes 2d6, etc).\n\nAt 4 stacks, roll a d6 after each use: 1-2: You take 2d6 force damage and lose all stacks. 3-6: You lose your action next turn.\n\nOn subsequent turns, you either must burn another charge to add to the stack OR you must burn a charge to maintain your current stack. If no charges are used by the end of each of your turns towards this ability, the stacks drop to 0.\n\nYou may purge all stacks as a bonus action to deal force damage equal to stacks x 1d6 to one creature within 30 ft.",
                                        "challengeType": "none",
                                        "type": [],
                                        "cost": {
                                            "resourceType": "spellfireCharges",
                                            "calculation": [
                                                {
                                                    "type": "static",
                                                    "value": 1
                                                }
                                            ]
                                        },
                                        "aspects": {
                                            "weaponDamageAdditional": {
                                                "calculation": [
                                                    {
                                                        "type": "dieRoll",
                                                        "value": 6,
                                                        "diceType": "Force"
                                                    }
                                                ]
                                            },
                                            "weaponAttackAddendum": {
                                                "calculation": [
                                                    {
                                                        "type": "static",
                                                        "value": "<b>Charged Arcflare Stack.</b> Add 1d6 Force damage to the total damage dealt."
                                                    }
                                                ]
                                            },
                                            "spellDamageBonus": {
                                                "calculation": [
                                                    {
                                                        "type": "dieRoll",
                                                        "value": 6,
                                                        "diceType": "Force"
                                                    }
                                                ]
                                            },
                                            "spellAttackAddendum": {
                                                "calculation": [
                                                    {
                                                        "type": "static",
                                                        "value": "<b>Charged Arcflare Stack.</b> Add 1d6 Force damage to the total damage dealt."
                                                    }
                                                ]
                                            }
                                        }
                                    }
                                ]
                            }
                        ]
                    }
                ]
            }
        ]
    }
]